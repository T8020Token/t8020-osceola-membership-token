import{f as t}from"./chunk-BW7YYVZE.js";import{IFrameWindow as a,SignersWindowTransport as s}from"@crossmint/client-sdk-window";import{environmentUrlConfig as m,signerInboundEvents as d,signerOutboundEvents as h}from"@crossmint/client-signers";var i=class{constructor(e){this.config=e;this.handshakeParent=null}initialize(){return t(this,null,function*(){if(this.handshakeParent)return this.handshakeParent;let e=new URL(m[this.config.environment]);e.searchParams.set("targetOrigin",window.location.origin);let n=yield this.createInvisibleIFrame(e.toString());return this.handshakeParent=yield a.init(n,{targetOrigin:e.origin,incomingEvents:h,outgoingEvents:d},s),yield this.handshakeParent.handshakeWithChild(),this.handshakeParent})}createInvisibleIFrame(e){return t(this,null,function*(){let n=document.createElement("iframe");return n.src=e,Object.assign(n.style,{position:"absolute",opacity:"0",pointerEvents:"none",width:"0",height:"0",border:"none",top:"-9999px",left:"-9999px"}),new Promise((r,o)=>{n.onload=()=>r(n),n.onerror=()=>o(new Error("Failed to load iframe content")),document.body.appendChild(n)})})}};export{i as a};

"use strict";Object.defineProperty(exports, "__esModule", {value: true});var _chunkXALFCQKDcjs = require('./chunk-XALFCQKD.cjs');var _clientsdkwindow = require('@crossmint/client-sdk-window');var _clientsigners = require('@crossmint/client-signers');var i=class{constructor(e){this.config=e;this.handshakeParent=null}initialize(){return _chunkXALFCQKDcjs.f.call(void 0, this,null,function*(){if(this.handshakeParent)return this.handshakeParent;let e=new URL(_clientsigners.environmentUrlConfig[this.config.environment]);e.searchParams.set("targetOrigin",window.location.origin);let n=yield this.createInvisibleIFrame(e.toString());return this.handshakeParent=yield _clientsdkwindow.IFrameWindow.init(n,{targetOrigin:e.origin,incomingEvents:_clientsigners.signerOutboundEvents,outgoingEvents:_clientsigners.signerInboundEvents},_clientsdkwindow.SignersWindowTransport),yield this.handshakeParent.handshakeWithChild(),this.handshakeParent})}createInvisibleIFrame(e){return _chunkXALFCQKDcjs.f.call(void 0, this,null,function*(){let n=document.createElement("iframe");return n.src=e,Object.assign(n.style,{position:"absolute",opacity:"0",pointerEvents:"none",width:"0",height:"0",border:"none",top:"-9999px",left:"-9999px"}),new Promise((r,o)=>{n.onload=()=>r(n),n.onerror=()=>o(new Error("Failed to load iframe content")),document.body.appendChild(n)})})}};exports.a = i;

import{a as P}from"./chunk-23YVHBPI.js";import{a as k}from"./chunk-AOBO3CEQ.js";import{a as T}from"./chunk-JL7YHC7D.js";import{a as u}from"./chunk-NZUCXN2O.js";import{a as n}from"./chunk-DFSB3TWF.js";import{a as E}from"./chunk-UAFW3OWA.js";import{d as v}from"./chunk-PXDN3KFO.js";import{useState as x}from"react";import a from"@emotion/styled";import B from"color";import{jsx as i,jsxs as f}from"react/jsx-runtime";var z=a.div`
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    width: 100%;
`,A=a.p`
    font-size: 16px;
    font-weight: 400;
    margin: 16px 0 4px 0;
    text-align: center;
    color: ${t=>{var o,e;return((e=(o=t.appearance)==null?void 0:o.colors)==null?void 0:e.textPrimary)||n["cm-text-primary"]}};
`,D=a.p`
    text-align: center;
    padding: 0 16px;
    margin: 0;
    color: ${t=>{var o,e;return((e=(o=t.appearance)==null?void 0:o.colors)==null?void 0:e.textSecondary)||n["cm-text-secondary"]}};
    font-size: 14px;
    line-height: 1.4;
    overflow-wrap: anywhere;
`,L=a.div`
    width: 100%;
    padding: 28px 0px 16px
`,N=a.form`
    position: relative;
`,F=a.input`
    ${u}
    
    /* Base input styles */
    display: flex;
    flex-grow: 1;
    text-align: left;
    padding-left: 16px;
    padding-right: 80px;
    height: 58px;
    width: 100%;
    border: 1px solid;
    border-color: ${t=>{var o,e,s,l;return t.hasError?((e=(o=t.appearance)==null?void 0:o.colors)==null?void 0:e.danger)||n["cm-danger"]:((l=(s=t.appearance)==null?void 0:s.colors)==null?void 0:l.border)||n["cm-border"]}};
    border-radius: ${t=>{var o;return((o=t.appearance)==null?void 0:o.borderRadius)||"12px"}};
    background-color: ${t=>{var o,e;return((e=(o=t.appearance)==null?void 0:o.colors)==null?void 0:e.inputBackground)||n["cm-background-primary"]}};
    color: ${t=>{var o,e;return((e=(o=t.appearance)==null?void 0:o.colors)==null?void 0:e.textPrimary)||n["cm-text-primary"]}};
    font-size: 16px;
    transition: border-color 200ms ease-in-out, box-shadow 200ms ease-in-out;
    
    &::placeholder {
        font-weight: 400;
        color: ${t=>{var o,e;return((e=(o=t.appearance)==null?void 0:o.colors)==null?void 0:e.textSecondary)||n["cm-text-secondary"]}};
    }
    
    &:focus {
        outline: none;
        box-shadow: 0 0 0 2px ${t=>{var o,e;return new B(((e=(o=t.appearance)==null?void 0:o.colors)==null?void 0:e.accent)||n["cm-accent"]).alpha(.18).toString()}};
    }
    
    &:read-only {
        cursor: not-allowed;
        opacity: 0.7;
    }
`,H=a.div`
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    display: flex;
    align-items: center;
    padding-right: 16px;
    aspect-ratio: 1/1;
`,M=a.button`
    ${u}
    
    font-weight: 500;
    white-space: nowrap;
    background-color: ${t=>{var o,e;return((e=(o=t.appearance)==null?void 0:o.colors)==null?void 0:e.inputBackground)||n["cm-background-primary"]}};
    color: ${t=>{var o,e;return((e=(o=t.appearance)==null?void 0:o.colors)==null?void 0:e.accent)||n["cm-accent"]}};
    cursor: ${t=>t.disabled?"not-allowed":"pointer"};
    opacity: ${t=>t.disabled?.6:1};
    border: none;
    padding: 8px 12px;
    border-radius: 6px;
    transition: opacity 200ms ease;
    
    &:hover:not(:disabled) {
        opacity: 0.8;
    }
    
    &:focus-visible {
        outline: 2px solid ${t=>{var o,e;return((e=(o=t.appearance)==null?void 0:o.colors)==null?void 0:e.accent)||n["cm-accent"]}};
        outline-offset: 2px;
    }

    &:not(:disabled):focus-visible {
        box-shadow: 0 0 0 2px ${t=>{var o,e;return new B(((e=(o=t.appearance)==null?void 0:o.colors)==null?void 0:e.accent)||n["cm-accent"]).alpha(.18).toString()}};
    }
`,V=a.div`
    font-size: 14px;
    color: ${t=>{var o,e;return((e=(o=t.appearance)==null?void 0:o.colors)==null?void 0:e.danger)||n["cm-danger"]}};
    margin-bottom: 16px;
`,j=a.div`
    font-size: 12px;
    line-height: 1.3;
    text-align: center;
    color: ${t=>{var o,e;return((e=(o=t.appearance)==null?void 0:o.colors)==null?void 0:e.textSecondary)||n["cm-text-secondary"]}};
    margin-bottom: 16px;
`;function oo({contactType:t,icon:o,title:e,description:s,onSubmitOTP:l,onResendCode:b,appearance:r,otpLength:h=9,helpText:O}){var I,$,S;let[m,R]=x(""),[d,y]=x(!1),[C,g]=x(null),p=C!=null,w=m.length===h,U=()=>v(this,null,function*(){y(!0);try{yield l(m),g(null)}catch(c){console.error(`Error confirming ${t} OTP:`,c),g("Invalid code. Please try again.")}finally{y(!1)}});return f(z,{children:[o,i(A,{appearance:r,children:e}),i(D,{appearance:r,children:s}),i(L,{children:f(N,{role:"form",onSubmit:c=>{w&&(c.preventDefault(),U())},noValidate:!0,children:[i(P,{children:"OTP Code"}),i(F,{id:"otpInput",maxLength:h,appearance:r,hasError:p,type:"text",placeholder:"Enter code",value:m,onChange:c=>{R(c.target.value),g(null)},readOnly:d,"aria-describedby":"otpError"}),f(H,{children:[p&&i(E,{customColor:(I=r==null?void 0:r.colors)==null?void 0:I.danger}),d&&i(k,{style:{color:($=r==null?void 0:r.colors)==null?void 0:$.textSecondary,fill:(S=r==null?void 0:r.colors)==null?void 0:S.textPrimary}}),!p&&!d?i(M,{type:"submit",appearance:r,disabled:!w||d,children:"Submit"}):null]})]})}),p&&i(V,{appearance:r,children:C}),i(j,{appearance:r,children:O}),b&&i(T,{initialSeconds:60,appearance:r,countdownText:c=>`Re-send code in ${c}s`,countdownCompleteText:"Re-send code",handleOnClick:b})]})}export{oo as a};

import{a as Tt}from"./chunk-LI7QMYLA.js";import{b as ht}from"./chunk-4KDASQO6.js";import{a as Ft}from"./chunk-JSNUJJQJ.js";import{a as kt}from"./chunk-ED6OVXN6.js";import{a as bt,b as St,c as Ot}from"./chunk-O5IPDCMT.js";import{a as H}from"./chunk-WHUNYZQD.js";import{a as gt}from"./chunk-LTY4MYLM.js";import{a as J}from"./chunk-AC2SJG3Q.js";import{a as P,b as Pt}from"./chunk-2F3UEXTE.js";import{a as Wt}from"./chunk-KFFPM6JM.js";import{a as vt}from"./chunk-23YVHBPI.js";import{a as _}from"./chunk-AOBO3CEQ.js";import{a as Et}from"./chunk-UG5R7IPH.js";import{a as wt}from"./chunk-JL7YHC7D.js";import{a as xt,b as yt,c as Ct}from"./chunk-RV2X7AFS.js";import{a as N}from"./chunk-NZUCXN2O.js";import{a as s}from"./chunk-DFSB3TWF.js";import{a as It}from"./chunk-UHFCB2EY.js";import{a as Y}from"./chunk-OAHZHKRR.js";import{a as X}from"./chunk-UAFW3OWA.js";import{a as At}from"./chunk-C3JRTLQP.js";import{a as B,b as R,c as q,d as w}from"./chunk-PXDN3KFO.js";import go from"color";import ie from"@emotion/styled";import{useState as Ze}from"react";import{useState as lt}from"react";import M from"@emotion/styled";import{useCrossmint as hr,useWallet as xr}from"@crossmint/client-sdk-react-base";import{useContext as Le}from"react";import{useEffect as it,useMemo as Se,useState as tt,useCallback as et,createContext as Oe,useRef as Ee}from"react";import{validateApiKeyAndGetCrossmintBaseUrl as ke}from"@crossmint/common-sdk-base";import{useCrossmint as Ie,CrossmintAuthBaseProvider as Fe,useCrossmintAuthBase as Nt}from"@crossmint/client-sdk-react-base";import{createContext as he,useCallback as Lt,useContext as xe,useEffect as ye,useState as Bt}from"react";import{useEffect as ce,useRef as ue,useState as me,useCallback as pe}from"react";import{ChildWindow as de,PopupWindow as fe}from"@crossmint/client-sdk-window";import{z as Z}from"zod";var Ut=(o,e)=>{let{crossmintAuth:t}=F(),[r,a]=me(null),i=ue(null);return ce(()=>(i.current==null&&(i.current=new de(window.opener||window.parent,"*",{incomingEvents:ge})),()=>{i.current!=null&&i.current.off("authMaterialFromPopupCallback")}),[]),{createPopupAndSetupListeners:pe((n,x)=>w(void 0,null,function*(){if(i.current==null)throw new Error("Child window not initialized");a(n),e(null),console.log("createPopupAndSetupListeners",n,x),console.log("oauthUrlMap",o),console.log("oauthUrlMap[provider]",o[n]);let l=new URL(o[n]);if(x!=null){let u=Array.from(l.searchParams.entries());l.search="",x&&l.searchParams.append("provider_login_hint",x),u.forEach(([m,h])=>{l.searchParams.append(m,h)})}let y=yield fe.init(l.toString(),{awaitToLoad:!1,crossOrigin:!0,width:400,height:700}),g=u=>w(void 0,null,function*(){var m,h;yield t==null?void 0:t.handleRefreshAuthMaterial(u.oneTimeSecret),(m=i.current)==null||m.off("authMaterialFromPopupCallback"),(h=y.window)==null||h.close(),a(null)}),p=u=>{var m,h;e(u.error),(m=i.current)==null||m.off("errorFromPopupCallback"),(h=y.window)==null||h.close(),a(null)};i.current.on("authMaterialFromPopupCallback",g),i.current.on("errorFromPopupCallback",p);let d=setInterval(()=>{var u,m;(u=y.window)!=null&&u.closed&&(clearInterval(d),a(null),(m=i.current)==null||m.off("authMaterialFromPopupCallback"))},2500)}),[o,t,e]),isLoading:r!=null,activeOAuthProvider:r}},ge={authMaterialFromPopupCallback:Z.object({oneTimeSecret:Z.string()}),errorFromPopupCallback:Z.object({error:Z.string()})};import{jsx as Ce}from"react/jsx-runtime";var Rt={google:"",twitter:""},$t=he(void 0);function $(){let o=xe($t);if(!o)throw new Error("useOAuthFlow must be used within an OAuthFlowProvider");return o}function Mt({children:o,prefetchOAuthUrls:e}){let{crossmintAuth:t,loginMethods:r}=Dt(),{setError:a}=P(),[i,c]=Bt(Rt),[n,x]=Bt(!0),{createPopupAndSetupListeners:l,isLoading:y,activeOAuthProvider:g}=Ut(i,a),p=Lt(()=>w(this,null,function*(){x(!0);try{let h=(r||[]).filter(f=>f in Rt).map(f=>w(this,null,function*(){let C=yield t==null?void 0:t.getOAuthUrl(f);return{[f]:C}})),v=Object.assign({},...yield Promise.all(h));c(v)}catch(m){a(m instanceof Error?m.message:"Unable to load oauth providers. Please try again later.")}finally{x(!1)}}),[r,t,a]);ye(()=>{e&&p()},[p,e]);let u={startOAuthLogin:Lt((m,h)=>w(this,null,function*(){yield l(m,h)}),[l]),isLoading:n||y,activeOAuthProvider:g};return Ce($t.Provider,{value:u,children:o})}import{useEffect as nt,useMemo as zt}from"react";import{useDynamicContext as we}from"@dynamic-labs/sdk-react-core";import{isEthereumWallet as ve}from"@dynamic-labs/ethereum";import{isSolanaWallet as Ae}from"@dynamic-labs/solana";import Pe from"bs58";import{EthereumWalletConnectors as jt}from"@dynamic-labs/ethereum";import{SolanaWalletConnectors as Gt}from"@dynamic-labs/solana";import{jsx as _t}from"react/jsx-runtime";function be({children:o,enabled:e,onSdkLoaded:t,onWalletConnected:r,jwt:a}){let{primaryWallet:i,sdkHasLoaded:c,removeWallet:n,handleUnlinkWallet:x}=we(),l=!e||c;return nt(()=>{l&&(t==null||t(l))},[l,t]),nt(()=>{a==null&&l&&i!=null&&(n(i.id),x(i.id))},[a,l,i,n,x]),nt(()=>{function y(){return w(this,null,function*(){try{if(ve(i)){let g=yield i.getWalletClient(),p={type:"external-wallet",address:g.account.address,viemAccount:R(B({},g.account),{signMessage:d=>w(this,null,function*(){return yield g.signMessage({message:d.message})})})};r(p)}else if(Ae(i)){let g=yield i.getSigner(),p={type:"external-wallet",address:i.address,onSignTransaction:d=>w(this,null,function*(){return yield g.signTransaction(d)})};r(p)}else throw new Error("Unsupported wallet type")}catch(g){throw console.error("Failed to get admin signer",g),new Error("Failed to get admin signer")}})}i!=null&&a!=null&&y()},[i,a,r]),o}function Ht({children:o,enabled:e=!0,apiKeyEnvironment:t,loginMethods:r=["web3"],appearance:a,onSdkLoaded:i,onWalletConnected:c}){var g,p;let{crossmintAuth:n,jwt:x}=F(),l=zt(()=>{var d,u;return`.powered-by-dynamic { display: none !important; }
            .wallet-list__scroll-container { padding: 0px !important; }
            .wallet-list__search-container { padding-left: 0px !important; padding-right: 0px !important; }
            .dynamic-footer { display: none !important; }
            h1 { color: ${(d=a==null?void 0:a.colors)==null?void 0:d.textPrimary} !important; }
            * { color: ${(u=a==null?void 0:a.colors)==null?void 0:u.textSecondary} !important; }`},[(g=a==null?void 0:a.colors)==null?void 0:g.textPrimary,(p=a==null?void 0:a.colors)==null?void 0:p.textSecondary]),y=zt(()=>{if(e)return r.includes("web3:evm-only")?[jt]:r.includes("web3:solana-only")?[Gt]:[jt,Gt]},[e,r]);return _t(gt,{apiKeyEnvironment:t,settings:{walletConnectors:y,cssOverrides:l,events:{onAuthFailure(d,u){console.error("[DynamicWalletProvider] onAuthFailure",d,u)}},handlers:{handleConnectedWallet:d=>w(this,null,function*(){var m;if(!n)return console.error("[DynamicWalletProvider] crossmintAuth is not available"),!1;let u=d.address;if(u==null)return console.error("[DynamicWalletProvider] handleConnectedWallet: address is missing"),!1;try{let v=(yield ht(d))==="solana"?"solana":"evm",f=yield n.signInWithSmartWallet(u,v);if((f==null?void 0:f.challenge)==null)throw new Error("No challenge received from signInWithSmartWallet");let C=yield(m=d.connector)==null?void 0:m.proveOwnership(u,f.challenge);if(C==null)throw new Error("Failed to get signature from wallet");let W=C;if(v==="solana"){let L=Buffer.from(C,"base64");W=Pe.encode(L)}let A=yield n.authenticateSmartWallet(u,v,W);if((A==null?void 0:A.oneTimeSecret)==null)throw new Error("No oneTimeSecret received from authenticateSmartWallet");return yield n.handleRefreshAuthMaterial(A.oneTimeSecret),!0}catch(h){return console.error("[DynamicWalletProvider] Error handling wallet connection:",h),!1}})}},children:_t(be,{enabled:e,onSdkLoaded:i,onWalletConnected:c,jwt:x,children:o})},`${t}-${r.join(",")}`)}import{Fragment as Kt,jsx as T,jsxs as Qt}from"react/jsx-runtime";var We={crossmintAuth:void 0,login:()=>{},logout:()=>{},jwt:void 0,user:void 0,status:"initializing",getUser:()=>{},experimental_externalWalletSigner:void 0,experimental_loginWithOAuth:()=>Promise.resolve(),loginMethods:[]},at=Oe(We);function Te({children:o,appearance:e,termsOfServiceText:t,prefetchOAuthUrls:r=!0,authModalTitle:a,onLoginSuccess:i,loginMethods:c=["email","google"]}){let n=Nt(),{crossmint:x,experimental_setCustomAuth:l,experimental_customAuth:y}=Ie("CrossmintAuthProvider must be used within CrossmintProvider"),g=ke(x.apiKey),[p,d]=tt(!1),[u,m]=tt(void 0),[h,v]=tt(!0),f=c.some(I=>I.startsWith("web3")),[C,W]=tt(void 0),A=Ee(null);it(()=>{var I,G;n.jwt==null&&(y==null?void 0:y.jwt)!=null&&l(void 0),C!=null||((I=n.user)==null?void 0:I.email)!=null?l({jwt:n.jwt,email:(G=n.user)==null?void 0:G.email,externalWalletSigner:C}):l({jwt:n.jwt})},[C,n.jwt,n.user,l,y]),it(()=>{n.jwt!=null&&p&&d(!1)},[n.jwt,p]);let L=et(I=>{if(n.jwt!=null){console.log("User already logged in");return}I!=null&&typeof I=="string"&&m(I),d(!0)},[n.jwt]),j=et(()=>n.status==="initializing"||f&&!h?"initializing":n.jwt!=null?"logged-in":p?"in-progress":"logged-out",[n.status,n.jwt,f,h,p]),ft=et(I=>w(this,null,function*(){var G;if(n.jwt!=null){console.log("User already logged in");return}yield(G=A.current)==null?void 0:G.call(A,I)}),[n.jwt]),se=Se(()=>R(B({},n),{login:L,status:j(),experimental_externalWalletSigner:C,experimental_loginWithOAuth:ft,loginMethods:c}),[n,L,j,C,ft,c]);return T(at.Provider,{value:se,children:T(Pt,{setDialogOpen:(I,G)=>{d(I),G&&(i==null||i())},initialState:{appearance:e,loginMethods:c,termsOfServiceText:t,authModalTitle:a,baseUrl:g,defaultEmail:u},children:T(Mt,{prefetchOAuthUrls:j()==="logged-out"&&r,children:T(Ue,{loginWithOAuthRef:A,children:f?Qt(Ht,{apiKeyEnvironment:x.apiKey.includes("production")?"production":"staging",loginMethods:c,appearance:e,onSdkLoaded:v,onWalletConnected:W,children:[o,T(ot,{open:p})]}):Qt(Kt,{children:[o,T(ot,{open:p})]})})})})})}function Ue({children:o,loginWithOAuthRef:e}){let{startOAuthLogin:t}=$(),r=Nt(),a=et(i=>w(this,null,function*(){if(r.jwt!=null){console.log("User already logged in");return}yield t(i)}),[r.jwt,t]);return it(()=>{e.current=a},[a,e]),T(Kt,{children:o})}function tr({children:o,appearance:e,termsOfServiceText:t,prefetchOAuthUrls:r=!0,authModalTitle:a,onLoginSuccess:i,loginMethods:c=["email","google"],refreshRoute:n,logoutRoute:x}){return T(Fe,{onLoginSuccess:i,refreshRoute:n,logoutRoute:x,children:T(Te,{onLoginSuccess:i,appearance:e,termsOfServiceText:t,prefetchOAuthUrls:r,authModalTitle:a,loginMethods:c,children:o})})}function F(){let o=Le(at);if(o==null)throw new Error("useCrossmintAuth must be used within a CrossmintAuthProvider");return o}var Dt=F;import{jsx as b,jsxs as K}from"react/jsx-runtime";var Be=M.div`
    display: flex;
    flex-direction: column;
`,Re=M.div`
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    width: 100%;
`,$e=M.div`
    position: relative;
    left: 12px;
`,Me=M.p`
    font-size: 16px;
    font-weight: 400;
    margin: 16px 0 4px 0;
    text-align: center;
    color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.textPrimary)||s["cm-text-primary"]}};
`,De=M.p`
    text-align: center;
    padding: 0 16px;
    margin: 0;
    color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.textSecondary)||s["cm-text-secondary"]}};
    font-size: 14px;
    line-height: 1.4;
`,ze=M.div`
    padding: 32px 0;
`,Q=M(Ot)`
    @media (max-width: 379px) {
        width: 40px;
        height: 56px;
        font-size: 28px;
        margin: 0;
    }
`,je=M.div`
    font-size: 12px;
    line-height: 1.3;
    text-align: center;
    color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.textSecondary)||s["cm-text-secondary"]}};
`;function Vt({otpEmailData:o,setOtpEmailData:e}){var h,v,f,C,W;let{crossmintAuth:t}=F(),{appearance:r,setDialogOpen:a,setStep:i,setError:c}=P(),[n,x]=lt(""),[l,y]=lt(!1),[g,p]=lt(!1),d=()=>w(this,null,function*(){var A,L;p(!0);try{let j=yield t==null?void 0:t.confirmEmailOtp((A=o==null?void 0:o.email)!=null?A:"",(L=o==null?void 0:o.emailId)!=null?L:"",n);yield t==null?void 0:t.handleRefreshAuthMaterial(j),a(!1,!0),i("initial")}catch(j){console.error("Error confirming email OTP",j),c("Invalid code. Please try again."),y(!0)}finally{p(!1)}}),u=()=>w(this,null,function*(){var A;try{yield t==null?void 0:t.sendEmailOtp((A=o==null?void 0:o.email)!=null?A:"")}catch(L){c("Failed to resend code. Please try again.")}});return K(Be,{children:[b(J,{onClick:()=>{i("initial"),e(null)},iconColor:(h=r==null?void 0:r.colors)==null?void 0:h.textPrimary,ringColor:(v=r==null?void 0:r.colors)==null?void 0:v.accent}),K(Re,{children:[b($e,{children:b(At,{customAccentColor:(f=r==null?void 0:r.colors)==null?void 0:f.accent,customButtonBackgroundColor:(C=r==null?void 0:r.colors)==null?void 0:C.buttonBackground,customBackgroundColor:(W=r==null?void 0:r.colors)==null?void 0:W.background})}),b(Me,{appearance:r,children:"Check your email"}),K(De,{appearance:r,children:["A temporary login code has been sent to",b("br",{}),o!=null&&o.email?b("strong",{children:o.email}):"your email address"]}),b(ze,{children:b(bt,{maxLength:6,value:n,onChange:A=>{x(A),y(!1),c(null)},onComplete:d,disabled:g,appearance:r,children:K(St,{children:[b(Q,{index:0,hasError:l}),b(Q,{index:1,hasError:l}),b(Q,{index:2,hasError:l}),b(Q,{index:3,hasError:l}),b(Q,{index:4,hasError:l}),b(Q,{index:5,hasError:l})]})})}),K(je,{appearance:r,children:["Can't find the email? Check spam folder.",b("br",{}),"Some emails may take several minutes to arrive."]}),b(wt,{initialSeconds:60,appearance:r,countdownText:A=>`Re-send code in ${A}s`,countdownCompleteText:"Re-send code",handleOnClick:u})]})]})}import{useState as ct}from"react";import Jt from"color";import D from"@emotion/styled";import{isEmailValid as ut}from"@crossmint/common-sdk-auth";import qt from"@emotion/styled";import{jsx as st,jsxs as He}from"react/jsx-runtime";var Ge=qt.button`
    ${N}
    
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    height: 32px;
    padding: 0 10px;
    border: 1px solid ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.border)||s["cm-border"]}};
    border-radius: ${o=>{var e;return((e=o.appearance)==null?void 0:e.borderRadius)||"12px"}};
    background-color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.buttonBackground)||s["cm-background-primary"]}};
    cursor: ${o=>o.isLoading?"not-allowed":"pointer"};
    
    /* Hover and focus states */
    &:hover {
        background-color: ${o=>o.isLoading?s["cm-muted-primary"]:s["cm-hover"]};
    }
    
    &:focus {
        outline: none;
        background-color: theme["cm-hover"];
    }
`,_e=qt.span`
    color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.accent)||s["cm-accent"]}};
    font-size: 14px;
    font-weight: 400;
`;function Xt({emailInput:o,appearance:e}){var i,c;let{startOAuthLogin:t,activeOAuthProvider:r}=$(),a=r==="google";return He(Ge,{type:"button",appearance:e,isLoading:a,onClick:a?void 0:()=>t("google",o.trim().toLowerCase()),children:[st(Y,{style:{height:"18px",width:"18px"}}),a?st(_,{style:{color:(i=e==null?void 0:e.colors)==null?void 0:i.textSecondary,fill:(c=e==null?void 0:e.colors)==null?void 0:c.textPrimary,width:"18px",height:"18px"}}):st(_e,{appearance:e,children:"Continue"})]})}import{jsx as U,jsxs as mt}from"react/jsx-runtime";var Qe=D.div`
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: flex-start;
    width: 100%;
    border-radius: 8px;
`,Ne=D.div`
    width: 100%;
`,Ke=D.label`
    display: block;
    margin-bottom: 5px;
    color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.textPrimary)||s["cm-text-primary"]}};
    font-size: 14px;
    font-weight: 400;
`,Ve=D.form`
    position: relative;
`,qe=D.input`
    ${N}
    
    /* Base input styles */
    display: flex;
    flex-grow: 1;
    text-align: left;
    padding-left: 16px;
    padding-right: ${o=>o.showGoogleButton?"132px":"80px"};
    height: 58px;
    width: 100%;
    border: 1px solid;
    border-color: ${o=>{var e,t,r,a;return o.hasError?((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.danger)||s["cm-danger"]:((a=(r=o.appearance)==null?void 0:r.colors)==null?void 0:a.border)||s["cm-border"]}};
    border-radius: ${o=>{var e;return((e=o.appearance)==null?void 0:e.borderRadius)||"12px"}};
    background-color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.inputBackground)||s["cm-background-primary"]}};
    color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.textPrimary)||s["cm-text-primary"]}};
    font-size: 16px;
    transition: border-color 200ms ease-in-out, box-shadow 200ms ease-in-out;
    
    &::placeholder {
        font-weight: 400;
        color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.textSecondary)||s["cm-text-secondary"]}};
    }
    
    &:focus {
        outline: none;
        box-shadow: 0 0 0 2px ${o=>{var e,t;return new Jt(((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.accent)||s["cm-accent"]).alpha(.18).toString()}};
    }
    
    &:read-only {
        cursor: not-allowed;
        opacity: 0.7;
    }
`,Xe=D.div`
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    display: flex;
    align-items: center;
    padding-right: 16px;
    aspect-ratio: 1/1;
`,Je=D.button`
    ${N}
    
    font-weight: 500;
    white-space: nowrap;
    background-color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.inputBackground)||s["cm-background-primary"]}};
    color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.accent)||s["cm-accent"]}};
    cursor: ${o=>o.disabled?"not-allowed":"pointer"};
    opacity: ${o=>o.disabled?.6:1};
    border: none;
    padding: 8px 12px;
    border-radius: 6px;
    transition: opacity 200ms ease;
    
    &:hover:not(:disabled) {
        opacity: 0.8;
    }
    
    &:focus-visible {
        outline: 2px solid ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.accent)||s["cm-accent"]}};
        outline-offset: 2px;
    }

    &:not(:disabled):focus-visible {
        box-shadow: 0 0 0 2px ${o=>{var e,t;return new Jt(((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.accent)||s["cm-accent"]).alpha(.18).toString()}};
    }
`,Ye=D.p`
    font-size: 12px;
    color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.danger)||s["cm-danger"]}};
    margin: 8px 0 8px 0;
`;function Yt({setOtpEmailData:o}){var m,h,v;let{crossmintAuth:e}=F(),{appearance:t,defaultEmail:r,setStep:a,setError:i,loginMethods:c}=P(),[n,x]=ct(r!=null?r:""),[l,y]=ct(""),[g,p]=ct(!1),d=n.toLowerCase().includes("@gmail.com")&&!n.toLowerCase().includes("+")&&ut(n)&&!g&&c.includes("google");function u(f){return w(this,null,function*(){f.preventDefault(),p(!0);try{let C=n.trim().toLowerCase(),W=yield e==null?void 0:e.sendEmailOtp(C);o({email:C,emailId:W.emailId}),a("otp")}catch(C){p(!1),i("Failed to send email. Please try again or contact support.")}})}return U(Qe,{children:mt(Ne,{children:[U(Ke,{appearance:t,children:"Email"}),mt(Ve,{role:"form",onSubmit:f=>{if(d){f.preventDefault();return}ut(n)?u(f):f.preventDefault()},noValidate:!0,children:[U(vt,{children:"Email"}),U(qe,{id:"emailInput",appearance:t,hasError:!!l,showGoogleButton:d,type:"email",placeholder:"your@email.com",value:n,onChange:f=>{x(f.target.value),y(""),i(null)},readOnly:g,"aria-describedby":"emailError"}),mt(Xe,{children:[l&&U(X,{customColor:(m=t==null?void 0:t.colors)==null?void 0:m.danger}),g&&U(_,{style:{color:(h=t==null?void 0:t.colors)==null?void 0:h.textSecondary,fill:(v=t==null?void 0:t.colors)==null?void 0:v.textPrimary}}),d?U(Xt,{emailInput:n,appearance:t}):!l&&!g?U(Je,{type:"submit",appearance:t,disabled:!ut(n)||g,children:"Submit"}):null]})]}),l&&U(Ye,{appearance:t,id:"emailError",children:l})]})})}import{jsx as Zt}from"react/jsx-runtime";function te(){let{step:o}=P(),[e,t]=Ze(null);return o==="otp"?Zt(Vt,{otpEmailData:e,setOtpEmailData:t}):o==="initial"?Zt(Yt,{setOtpEmailData:t}):null}import{jsx as pt}from"react/jsx-runtime";function ee(e){var o=q(e,[]);var n;let{step:t,appearance:r}=P(),{startOAuthLogin:a,activeOAuthProvider:i}=$(),c=i==="google";return t!=="initial"?null:pt(H,R(B({icon:pt(Y,{style:{height:"25px",width:"25px"}}),isLoading:c,appearance:r,onButtonClick:()=>a("google")},o),{children:pt("span",{style:{color:(n=r==null?void 0:r.colors)==null?void 0:n.textPrimary},children:"Sign in with Google"})}))}import{useEffect as dt,useMemo as to,useState as eo}from"react";import{useSignIn as oo,QRCode as ro}from"@farcaster/auth-kit";import z from"@emotion/styled";import{Fragment as fo,jsx as k,jsxs as rt}from"react/jsx-runtime";var no=z.div`
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
`,io=z.div`
    text-align: center;
`,ao=z.h3`
    font-size: 18px;
    font-weight: 600;
    color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.textPrimary)||s["cm-text-primary"]}};
    margin: 0 0 8px 0;
`,lo=z.p`
    font-size: 16px;
    font-weight: 400;
    color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.textSecondary)||s["cm-text-secondary"]}};
    margin: 0;
`,so=z.div`
    background-color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.inputBackground)||s["cm-background-primary"]}};
    aspect-ratio: 1;
    border-radius: ${o=>{var e;return((e=o.appearance)==null?void 0:e.borderRadius)||"8px"}};
    padding: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
`,co=z.div`
    min-height: 246px;
    display: flex;
    align-items: center;
    justify-content: center;
`,uo=z.p`
    font-size: 16px;
    text-align: center;
    font-weight: 400;
    color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.textSecondary)||s["cm-text-secondary"]}};
    margin: 0;
`,mo=z.a`
    font-size: 16px;
    font-weight: 400;
    color: ${o=>{var e,t;return((t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.textLink)||s["cm-accent"]}};
    text-decoration: none;
    
    &:hover {
        text-decoration: underline;
    }
`;function oe(){let{step:o,appearance:e,setStep:t,setError:r}=P();return o==="initial"?k(H,{icon:k(It,{style:{height:"25px",width:"25px"}}),appearance:e,onButtonClick:()=>{t("qrCode"),r(null)},children:"Sign in with Farcaster"}):o==="qrCode"?k(po,{}):null}function po(){var u,m,h,v;let{crossmintAuth:o}=F(),{appearance:e,setStep:t,setDialogOpen:r,setError:a}=P(),[i,c]=eo(null),n=to(()=>({onSuccess:f=>{c(f)}}),[]),{signIn:x,url:l,connect:y,signOut:g,isConnected:p}=oo(n),d=f=>w(this,null,function*(){a(null);try{let C=yield o==null?void 0:o.signInWithFarcaster(f);yield o==null?void 0:o.handleRefreshAuthMaterial(C),r(!1),t("initial")}catch(C){console.error("Error during Farcaster sign-in:",C),a("Failed to sign in with Farcaster")}});return dt(()=>{i!=null&&d(i)},[i]),dt(()=>{p&&x()},[p]),dt(()=>{y()},[]),rt("div",{children:[k(J,{onClick:()=>{g(),t("initial")},iconColor:(u=e==null?void 0:e.colors)==null?void 0:u.textPrimary,ringColor:(m=e==null?void 0:e.colors)==null?void 0:m.accent}),rt(no,{children:[rt(io,{children:[k(ao,{appearance:e,children:"Sign in with Farcaster"}),k(lo,{appearance:e,children:"Scan with your phone's camera to continue."})]}),k(so,{appearance:e,children:l!=null?k(ro,{uri:l,size:280}):k(co,{children:k(_,{style:{color:(h=e==null?void 0:e.colors)==null?void 0:h.textSecondary,fill:(v=e==null?void 0:e.colors)==null?void 0:v.textPrimary}})})}),l?rt(fo,{children:[k(uo,{appearance:e,children:"Alternatively, click on this link to open Warpcast."}),k(mo,{href:l,rel:"noopener noreferrer",target:"_blank",appearance:e,children:"Open Warpcast"})]}):k("div",{style:{height:"66px"}})]})]})}import{jsx as re}from"react/jsx-runtime";function ne(e){var o=q(e,[]);let{step:t,appearance:r}=P(),{startOAuthLogin:a,activeOAuthProvider:i}=$(),c=i==="twitter";return t!=="initial"?null:re(H,R(B({icon:re(Wt,{style:{height:"22px",width:"22px"}}),isLoading:c,appearance:r,onButtonClick:()=>a("twitter")},o),{children:"Sign in with X"}))}import{jsx as E,jsxs as V}from"react/jsx-runtime";var ho=ie.div`
    position: relative;
    padding: 40px 24px 30px 24px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    -webkit-font-smoothing: antialiased;
    animation: none;
    
    @media (min-width: 480px) {
        padding: 40px 40px 30px 40px;
    }
`,xo=ie.div`
    display: flex;
    align-items: flex-start;
    justify-content: flex-start;
    border-radius: 8px;
    padding: 8px;
    gap: 8px;
    margin-top: 34px;
    background-color: ${o=>{var e,t,r;return new go((r=(t=(e=o.appearance)==null?void 0:e.colors)==null?void 0:t.danger)!=null?r:s["cm-danger"]).alpha(.12).toString()}};
`;function ae({style:o}){var x,l,y,g,p,d,u,m,h,v;let{step:e,appearance:t,loginMethods:r,baseUrl:a,error:i,termsOfServiceText:c,authModalTitle:n}=P();return V(ho,{style:o,children:[i!=null?V(xo,{appearance:t,children:[E("div",{style:{minWidth:"20px"},children:E(X,{customColor:(l=(x=t==null?void 0:t.colors)==null?void 0:x.danger)!=null?l:s["cm-danger"]})}),E("p",{style:{fontSize:"14px",margin:0,color:(g=(y=t==null?void 0:t.colors)==null?void 0:y.danger)!=null?g:s["cm-danger"]},children:i})]}):null,e==="initial"?V("div",{children:[E(yt,{appearance:t,children:n!=null?n:"Sign in to Crossmint"}),E(Ct,{appearance:t,children:"Access using one of the options below."})]}):null,r.includes("google")?E(ee,{}):null,r.includes("farcaster")?E(Ft,{baseUrl:a,children:E(oe,{})}):null,r.includes("twitter")?E(ne,{}):null,r.some(f=>f.startsWith("web3"))?E(Tt,{}):null,r.includes("email")?V("div",{children:[r.length>1?E(kt,{appearance:t,text:"OR"}):null,E(te,{})]}):null,e==="initial"&&c!=null?V("div",{style:{fontSize:"0.875rem",textAlign:"center",marginTop:"0.5rem",color:(d=(p=t==null?void 0:t.colors)==null?void 0:p.textSecondary)!=null?d:s["cm-text-secondary"]},children:[E("style",{children:`
                        p a {
                            color: ${(m=(u=t==null?void 0:t.colors)==null?void 0:u.textLink)!=null?m:s["cm-link"]};
                        }
                    `}),c]}):null,e==="initial"||e==="otp"?E(Et,{style:{marginTop:"1rem",justifyContent:"center"},color:(v=(h=t==null?void 0:t.colors)==null?void 0:h.textSecondary)!=null?v:s["cm-text-secondary"]}):null]})}import{jsx as le}from"react/jsx-runtime";function ot({open:o}){let{appearance:e,setDialogOpen:t}=P();return le(xt,{open:o,setDialogOpen:t,appearance:e,children:le(ae,{style:{maxWidth:"448px",padding:"0px"}})})}export{ot as a,Ut as b,$ as c,Mt as d,Ht as e,at as f,tr as g,F as h,Dt as i,hr as j,xr as k,Vt as l,Xt as m,Yt as n,te as o,ee as p,oe as q,ne as r,ae as s};

import{a as y}from"./chunk-5X3MPD2V.js";import{a as l}from"./chunk-ZH7L354S.js";import{a,b as p}from"./chunk-PXDN3KFO.js";import{useCrossmint as E}from"@crossmint/client-sdk-react-base";import{lazy as v,useEffect as h,useRef as s,useState as f}from"react";import{crossmintEmbeddedCheckoutV3Service as S}from"@crossmint/client-sdk-base";import{Fragment as x,jsx as o,jsxs as H}from"react/jsx-runtime";var V=v(()=>import("./components/embed/v3/crypto/CryptoWalletConnectionHandler.js").then(r=>({default:r.CryptoWalletConnectionHandler})));function K(r){var m;let[e,C]=f(null),[P,b]=f(0),g=s((m=r.payment.crypto.payer)==null?void 0:m.initialChain),n=s(r);if(I(r,n.current)){let t=a({},r),u=w(r,g.current);u.shouldPreserve&&(t.payment.crypto.payer=u.updatedPayer),n.current=t}let{crossmint:k}=E(),c=l(k,{usageOrigin:"client"}),d=S({apiClient:c}),i=s(null);return h(()=>{let t=i.current;!t||e||C(d.iframe.createClient(t))},[i.current,e]),h(()=>{if(e!=null)return e.on("ui:height.changed",t=>b(t.height)),()=>{e.off("ui:height.changed")}},[e]),H(x,{children:[o("iframe",{ref:i,src:d.iframe.getUrl(n.current),id:"crossmint-embedded-checkout.iframe",role:"crossmint-embedded-checkout.iframe",allow:"payment *; microphone; camera",style:{boxShadow:"none",border:"none",padding:"0px",width:"100%",minWidth:"100%",overflow:"hidden",display:"block",userSelect:"none",transform:"translate(0px)",opacity:"1",transition:"ease 0s, opacity 0.4s ease 0.1s",height:`${P}px`,backgroundColor:"transparent"}}),n.current.payment.crypto.enabled?n.current.payment.crypto.payer!=null?o(y,{payer:n.current.payment.crypto.payer,iframeClient:e}):o(V,{iframeClient:e,apiKeyEnvironment:c.parsedAPIKey.environment}):null,o("span",{id:"crossmint-focus-target",tabIndex:-1})]})}function I(r,e){return JSON.stringify(r)!==JSON.stringify(e)}function w(r,e){return r.payment.crypto.payer&&e!=null?{shouldPreserve:!0,updatedPayer:p(a({},r.payment.crypto.payer),{initialChain:e})}:{shouldPreserve:!1}}export{K as a};
